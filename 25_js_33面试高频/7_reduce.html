<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <meta http-equiv="X-UA-Compatible" content="ie=edge" />
        <title>7_reduce</title>
    </head>
    <body></body>
</html>
<script>
    let arr = [1, 2, [3, 4, [5, 6, [7, 8, [9, 10]]]]]
    let newArr1 = arr.flat(Infinity)
    const reducer = (sum, cur, index, arr) => {
        console.log(sum, cur, index, arr)
        return sum + cur //  不加return 的话 第一个返回数组的初始值 剩下的返回为undefined
    }

    /*
        str 1 0 (10) [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]
        str1 2 1 (10) [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]
        str12 3 2 (10) [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]
        str123 4 3 (10) [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]
        str1234 5 4 (10) [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]
        str12345 6 5 (10) [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]
        str123456 7 6 (10) [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]
        str1234567 8 7 (10) [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]
        str12345678 9 8 (10) [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]
        str123456789 10 9 (10) [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]
    */

    newArr1.reduce(reducer, 'str') //  设置初始值

    //  函数应用 将二维数组转化为一维
    let arr2 = [
        [1, 2],
        [3, 4],
        [5, 6]
    ]
    let newArr2 = arr2.reduce((prev, cur) => {
        return prev.concat(cur)
    })
    console.log('newArr2', newArr2) //  newArr2 (6) [1, 2, 3, 4, 5, 6]

    //  计算元素中每个元素出现的次数
    let nameArr = ['Bob', 'jack', 'tom', 'jack', 'tom']
    nameArr.reduce((prev, cur) => {
        if (cur in prev) {
            //    对象 prev 是否有属性 cur
            prev[cur]++
        } else {
            prev[cur] = 1
        }
        console.log('prev', prev)
        return prev
    }, {})

    /*
        prev {Bob: 1}
        prev {Bob: 1, jack: 1}
        prev {Bob: 1, jack: 1, tom: 1}
        prev {Bob: 1, jack: 2, tom: 1}
        prev {Bob: 1, jack: 2, tom: 2}
    */
</script>
